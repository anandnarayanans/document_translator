<div class="header">
  <div class="logo-title">
    <img
      src="https://i.postimg.cc/tCP13PNR/image-1.png"
      alt="DiGiVerZ Logo"
      class="logo"
    />
    <div class="vertical-divider"></div>
    <span>‎ ‎ ‎‎ ‎ ‎‎</span>
    <h1>Accelerator <span>(Arabic to English)</span></h1>
  </div>

  <div class="user-profile">
    <mat-icon>notifications</mat-icon>
    <div class="user-info">
      <span>‎ ‎ ‎ ‎ Abdullah</span>
      <img
        src="https://i.postimg.cc/tgbrcVpx/0.jpg"
        alt="User"
        class="profile-pic"
      />
    </div>
  </div>
</div>

<div class="container">
  <!-- Header Section -->
  <div class="translate-section">
    <div class="center-content">
      <!-- Hidden file input -->
      <input type="file" #fileInput (change)="onFileSelected($event)" hidden />

      <!-- Translate Button -->
      <button
        mat-raised-button
        color="primary"
        class="translate-btn"
        (click)="fileInput.click()"
      >
        <mat-icon>add</mat-icon> Translate
      </button>
      <!-- Download Button -->
      <button
        mat-raised-button
        color="accent"
        class="translate-btn"
        (click)="onDownloadClick()"
      >
        <mat-icon>file_download</mat-icon> Download
      </button>
      <p class="supported-text">Supported file types: PDF, DOCX, DOC</p>
    </div>
  </div>
</div>

<div class="inner-container">
  <div class="left-side">
    <div class="container">
      <mat-card class="full-height">
        <mat-card-content>
          <div
            class="file-drop-zone"
            (drop)="onDrop($event)"
            (dragover)="onDragOver($event)"
          >
            <img
              src="https://imagetolink.com/ib/qcTOLXVzTD.png"
              alt="Cloud Upload"
              class="upload-icon"
            />
            <p>Drag and drop</p>
            <i style="font-size: small; font-weight: lighter"
              >Right-to-Left (RTL) Language Support</i
            >
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    <br />
    <div class="incident-toolbar2">
      <b style="font-size: 12px; font-weight: bold; color: rgb(255, 255, 255)">
        ‎ ‎ ‎‎ ‎ ‎‎ ‎ ‎‎ ‎ ‎‎ ‎ ‎Or
      </b>
    </div>
    <div class="mt-3 common-upload-section">
      <button
        mat-raised-button
        color="primary"
        class="w-100 mt3 transparent-button1"
        (click)="fileInput.click()"
      >
        Choose file
      </button>
      <input
        type="file"
        #fileInput
        (change)="onFileSelected($event)"
        hidden
        accept=".pdf,.docx,.pptx,.xlsx"
      />
    </div>
    <div *ngIf="file" class="mt-3 common-upload-section">
      <div class="upload-progress-container">
        <div class="progress-container">
          <div class="progress">
            <div
              class="progress-bar animated-stripes"
              [style.width.%]="uploadProgress"
            >
              <span class="progress-label">{{ uploadProgress }}%</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="translationProgress > 0" class="mt-3 common-upload-section">
      <div class="upload-progress-container">
        <button mat-raised-button color="primary" class="transparent-button">
          Translation Progress
        </button>
        <div class="progress-container">
          <div class="progress">
            <div
              class="progress-bar animated-stripes"
              [style.width.%]="translationProgress"
            >
              <span class="progress-label">{{ translationProgress }}%</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="translatedFileUrl" class="mt-3 common-upload-section1">
      <button
        mat-raised-button
        color="accent"
        class="w-100 mt3 transparent-button1"
        (click)="downloadPDF()"
      >
        Download
      </button>
      <br />
      <button
        mat-raised-button
        color="primary"
        class="w-100 mt3 transparent-button1"
        (click)="previewPDF()"
      >
        Preview
      </button>
    </div>
  </div>
  <div class="right-side">
    <div *ngIf="isTranslating; else pdfViewer" class="spinner-container">
      <!-- <mat-spinner></mat-spinner> -->
      <div class="spinner"></div>
    </div>
    <ng-template #pdfViewer>
      <pdf-viewer
        *ngIf="showPreview && translatedPDFUrl"
        [src]="translatedPDFUrl"
        [render-text]="true"
        style="width: 100%; height: 100%"
      >
      </pdf-viewer>
    </ng-template>
  </div>
</div>
<div class="table-container">
  <h4
    style="
      text-align: center;
      margin-bottom: 2px;
      font-weight: 400;
      background-color: rgb(66, 61, 210);
    "
  >
    Translation History
  </h4>
  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="fileName">
      <th mat-header-cell *matHeaderCellDef style="background-color: #6390ff">
        File Name
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        style="background-color: #99afff; color: rgb(0, 0, 0); font-weight: 500"
      >
        {{ element.file_name }}
      </td>
    </ng-container>
    <ng-container matColumnDef="downloadLink">
      <th mat-header-cell *matHeaderCellDef style="background-color: #6390ff">
        Download
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        style="background-color: #99afff; color: rgb(0, 0, 0); font-weight: 500"
      >
        <a [href]="element.download_link" download>Download</a>
      </td>
    </ng-container>
    <ng-container matColumnDef="fileFormat">
      <th mat-header-cell *matHeaderCellDef style="background-color: #6390ff">
        File format
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        style="background-color: #99afff; color: rgb(0, 0, 0); font-weight: 500"
      >
        {{ element.initial_format }}
      </td>
    </ng-container>

    <ng-container matColumnDef="translationDate">
      <th mat-header-cell *matHeaderCellDef style="background-color: #6390ff">
        Translation Date
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        style="background-color: #99afff; color: rgb(0, 0, 0); font-weight: 500"
      >
        {{ element.translation_date }}
      </td>
    </ng-container>

    <ng-container matColumnDef="translationTime">
      <th mat-header-cell *matHeaderCellDef style="background-color: #6390ff">
        Translation Time
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        style="background-color: #99afff; color: rgb(0, 0, 0); font-weight: 500"
      >
        {{ element.translation_time }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
